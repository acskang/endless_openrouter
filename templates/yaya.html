{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Yaya SVG</title>
    <style>
/* CSS ì´ˆê¸°í™” ë° ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
/* * {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

:root {
  --primary: #a3a3ff;
  --bg-dark: #1a1a1a;
  --text-white: #ffffff;
}

body {
  font-family: "Segoe UI", sans-serif;
  background: var(--bg-dark);
  color: var(--text-white);
  min-height: 100vh;
} */

/* === ì•¼ì•¼ SVG === */
.yaya-svg {
  position: fixed;
  width: 80px;
  height: 80px;
  z-index: 500;
  left: -100px;
  top: 50vh;
  transform: translateY(-50%);
  cursor: pointer;
  opacity: 0;
}

.yaya-svg:hover {
  transform: translateY(-50%) scale(1.1);
  filter: drop-shadow(0 0 10px var(--primary));
}

.yaya-svg.animate {
  animation: float 6s ease-in-out;
}

.svg-fallback {
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, var(--primary), #8b8bff);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 30px;
}

/* === ë§í’ì„  === */
.speech-bubble {
  position: fixed;
  background: linear-gradient(135deg, var(--primary), #8b8bff);
  color: white;
  padding: 8px 16px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: bold;
  z-index: 501;
  opacity: 0;
  transform: scale(0.8);
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(163, 163, 255, 0.3);
}

.speech-bubble::after {
  content: '';
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  border: 8px solid transparent;
  border-top-color: var(--primary);
}

.speech-bubble.show {
  opacity: 1;
  transform: scale(1);
}

/* === í† ìŠ¤íŠ¸ === */
.toast {
  position: fixed;
  top: 20px;
  right: 20px;
  background: linear-gradient(135deg, #4ade80, #22c55e);
  color: white;
  padding: 12px 20px;
  border-radius: 8px;
  z-index: 1000;
  opacity: 0;
  transform: translateX(100%);
  transition: all 0.3s ease;
  font-weight: bold;
}

.toast.show {
  opacity: 1;
  transform: translateX(0);
}

/* === ì• ë‹ˆë©”ì´ì…˜ === */
@keyframes float {
  0%, 100% {
    left: -100px;
    opacity: 0;
  }
  10%, 90% {
    opacity: 1;
  }
  50% {
    left: calc(100vw - 40px);
  }
}
    </style>
</head>
<body>

<!-- ì•¼ì•¼ SVG -->
<div id="yayaSvg" class="yaya-svg">
  <img src="{% static 'img/yaya.svg' %}" alt="Yaya" width="80" height="80" 
       onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
  <div class="svg-fallback" style="display: none;">ğŸ¬</div>
</div>

<script>
// === ì„¤ì • ===
const CONFIG = {
  messages: ["Movie Clips", "ì˜í™” ê²€ìƒ‰!", "ì‹œì‘í•´ìš”!", "Endless..."],
  interval: 20000,  // 20ì´ˆë§ˆë‹¤ ì• ë‹ˆë©”ì´ì…˜
  duration: 15000,   // 15ì´ˆ ë™ì•ˆ ì• ë‹ˆë©”ì´ì…˜
  delay: 2000       // 2ì´ˆ í›„ ì‹œì‘
};

// === ë©”ì¸ í•¨ìˆ˜ ===
function initYayaSvg() {
  const svg = document.getElementById("yayaSvg");
  if (!svg) return;

  let isAnimating = false;
  let bubble = null;

  // ëœë¤ ë©”ì‹œì§€
  function getRandomMessage() {
    return CONFIG.messages[Math.floor(Math.random() * CONFIG.messages.length)];
  }

  // í† ìŠ¤íŠ¸ ë©”ì‹œì§€
  function showToast(message) {
    const toast = document.createElement('div');
    toast.className = 'toast';
    toast.textContent = message;
    document.body.appendChild(toast);

    setTimeout(() => toast.classList.add('show'), 100);
    setTimeout(() => {
      toast.classList.remove('show');
      setTimeout(() => document.body.removeChild(toast), 300);
    }, 2000);
  }

  // ë§í’ì„  ìƒì„±/í‘œì‹œ
  function showBubble() {
    if (bubble) return;

    bubble = document.createElement('div');
    bubble.className = 'speech-bubble';
    bubble.textContent = getRandomMessage();
    document.body.appendChild(bubble);

    setTimeout(() => bubble.classList.add('show'), 1000);
  }

  // ë§í’ì„  ìœ„ì¹˜ ì—…ë°ì´íŠ¸
  function updateBubblePosition() {
    if (!bubble || !isAnimating) return;

    const rect = svg.getBoundingClientRect();
    bubble.style.left = rect.left + rect.width / 2 - bubble.offsetWidth / 2 + 'px';
    bubble.style.top = rect.top - bubble.offsetHeight - 10 + 'px';
  }

  // ë§í’ì„  ìˆ¨ê¸°ê¸°
  function hideBubble() {
    if (bubble) {
      bubble.classList.remove('show');
      setTimeout(() => {
        if (bubble && document.body.contains(bubble)) {
          document.body.removeChild(bubble);
          bubble = null;
        }
      }, 300);
    }
  }

  // ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
  function startAnimation() {
    if (isAnimating) return;

    isAnimating = true;
    
    // ëœë¤ Y ìœ„ì¹˜
    svg.style.top = Math.random() * (window.innerHeight * 0.8) + window.innerHeight * 0.1 + 'px';
    
    // ì• ë‹ˆë©”ì´ì…˜ í´ë˜ìŠ¤ ì¶”ê°€
    svg.classList.add('animate');
    showBubble();

    // ìœ„ì¹˜ ì—…ë°ì´íŠ¸
    const updateInterval = setInterval(updateBubblePosition, 100);

    // ì• ë‹ˆë©”ì´ì…˜ ì¢…ë£Œ
    setTimeout(() => {
      isAnimating = false;
      svg.classList.remove('animate');
      hideBubble();
      clearInterval(updateInterval);
      
      // ë‹¤ìŒ ì• ë‹ˆë©”ì´ì…˜ ì˜ˆì•½
      setTimeout(startAnimation, CONFIG.interval - CONFIG.duration);
    }, CONFIG.duration);
  }

  // í´ë¦­ ì´ë²¤íŠ¸
  svg.addEventListener('click', () => {
    if (isAnimating) {
      showToast('ğŸ‰ ì˜í™” ê²€ìƒ‰ í˜ì´ì§€ë¡œ ì´ë™!');
      console.log('í˜ì´ì§€ ì´ë™: /movie/');
      // window.location.href = '/movie/';
    }
  });

  // ë§í’ì„  í´ë¦­
  document.addEventListener('click', (e) => {
    if (bubble && bubble.contains(e.target)) {
      svg.click();
    }
  });

  // ì°½ í¬ê¸° ë³€ê²½ ì‹œ
  window.addEventListener('resize', () => {
    if (!isAnimating) {
      svg.style.top = Math.random() * (window.innerHeight * 0.8) + window.innerHeight * 0.1 + 'px';
    }
  });

  // ì‹œì‘
  setTimeout(startAnimation, CONFIG.delay);
  console.log('ğŸ¬ ì•¼ì•¼ SVG ì´ˆê¸°í™” ì™„ë£Œ!');
}

// === ì´ˆê¸°í™” ===
document.addEventListener('DOMContentLoaded', initYayaSvg);
</script>
</body>
</html>